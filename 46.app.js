(()=>{"use strict";var e,r,t,n,a={5046:(e,r,t)=>{var n,a,o,s;!function(e){e.creatingSession="REPLICATION_CREATING_SESSION",e.connectionReady="REPLICATION_CONNECTION_READY",e.connectionClosed="REPLICATION_CONNECTION_CLOSED",e.connectionError="REPLICATION_CONNECTION_ERROR",e.receiveMessage="REPLICATION_RECEIVE_MESSAGE",e.sendPing="REPLICATION_SEND_PING",e.noop="REPLICATION_NOOP"}(n||(n={})),function(e){e.create="SESSION_CREATE",e.started="SESSION_STARTED",e.ended="SESSION_ENDED",e.join="SESSION_JOIN",e.leave="SESSION_LEAVE",e.addUser="SESSION_ADD_USER",e.removeUser="SESSION_REMOVE_USER",e.changeUserName="SESSION_CHANGE_USER_NAME",e.userNameChanged="SESSION_USER_NAME_CHANGED",e.sendMessage="REPLICATION_SEND_MESSAGE"}(a||(a={})),function(e){e.action="ACTION",e.joined="JOINED",e.userJoined="USER_JOINED",e.userLeft="USER_LEFT",e.userChangedName="USER_CHANGED_NAME",e.error="ERROR"}(o||(o={})),function(e){e.action="ACTION",e.create="CREATE",e.join="JOIN",e.ping="PING",e.changeName="CHANGE_NAME",e.leave="LEAVE"}(s||(s={}));var i=t(7536),l=t(6511);i.A.interceptors.response.use((e=>0!==e.data.success?(l.Ay.error({message:"警告",description:e.data.message}),Promise.reject(e)):e),(e=>Promise.reject(e)));const c=e=>i.A.get("http://127.0.0.1:8080/set_server_ip?address="+e);let d=null,E=null,p=null,u=!1;onmessage=e=>{let r=e.data;switch(r.func){case"CREATE":return d=f(r.payload.serverAddress,r.payload.serializableState),c(r.payload.serverAddress),null;case"JOIN":return d=g(r.payload.serverAddress,r.payload.sessionId),c(r.payload.serverAddress),null;case"CHANGE_NAME":return d&&E&&((e,r)=>{e.send(JSON.stringify({command:s.changeName,payload:{name:r}}))})(d,r.payload.newName),null;case"TERMINATE":return d&&I(d),null;case"SEND":d&&E&&((e,r)=>{e.send(JSON.stringify(r))})(d,r.payload.message);default:return null}};const S=e=>{postMessage(e)},N=e=>{S({event:"DISPATCH",payload:{action:e}})},O=e=>{let r=new WebSocket(e);return r.onmessage=e=>_(e),r.onclose=e=>v(e),r.onerror=e=>m(e),r},f=(e,r)=>{let t=O(e);return y(t),t.onopen=e=>{((e,r)=>{e.send(JSON.stringify({command:s.create,payload:{state:r}}))})(t,r)},t},g=(e,r)=>{let t=O(e);return y(t),t.onopen=e=>{((e,r)=>{e.send(JSON.stringify({command:s.join,payload:{sessionId:r}}))})(t,r)},t},y=e=>{p=setInterval((()=>{(e=>{e.send(JSON.stringify({command:s.ping}))})(e)}),1e3)},I=e=>{u=!0,E=null,null!==p&&clearInterval(p);try{(e=>{e.send(JSON.stringify({command:s.leave})),e.close()})(e),e.close()}catch(e){console.log(e)}},_=e=>{let r=JSON.parse(e.data);r.command==o.error&&N({type:n.receiveMessage,payload:{message:r,sessionId:""}}),r.command==o.joined&&(E=r.payload.sessionId,S({event:"SESSION_ID",payload:r.payload})),null!==E&&N({type:n.receiveMessage,payload:{message:r,sessionId:E}})},v=e=>{d&&I(d),S({event:"CLOSE"})},m=e=>{d&&I(d),S({event:"ERROR",payload:{msg:""}})}}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var t=o[e]={exports:{}};return a[e](t,t.exports,s),t.exports}s.m=a,s.x=()=>{var e=s.O(void 0,[446],(()=>s(5046)));return s.O(e)},e=[],s.O=(r,t,n,a)=>{if(!t){var o=1/0;for(d=0;d<e.length;d++){for(var[t,n,a]=e[d],i=!0,l=0;l<t.length;l++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](t[l])))?t.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(d--,1);var c=n();void 0!==c&&(r=c)}}return r}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[t,n,a]},s.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return s.d(r,{a:r}),r},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var a=Object.create(null);s.r(a);var o={};r=r||[null,t({}),t([]),t(t)];for(var i=2&n&&e;"object"==typeof i&&!~r.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((r=>o[r]=()=>e[r]));return o.default=()=>e,s.d(a,o),a},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((r,t)=>(s.f[t](e,r),r)),[])),s.u=e=>e+".app.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={46:1};s.f.i=(r,t)=>{e[r]||importScripts(s.p+s.u(r))};var r=self.webpackChunksquadstrat=self.webpackChunksquadstrat||[],t=r.push.bind(r);r.push=r=>{var[n,a,o]=r;for(var i in a)s.o(a,i)&&(s.m[i]=a[i]);for(o&&o(s);n.length;)e[n.pop()]=1;t(r)}})(),n=s.x,s.x=()=>s.e(446).then(n),s.x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFvQnNELEVBQUVKLEdBRTlELEVBR0QsSUFBSTRCLEVBQXFCQyxLQUE2Qix1QkFBSUEsS0FBNkIsd0JBQUssR0FDeEZDLEVBQTZCRixFQUFtQkcsS0FBS0MsS0FBS0osR0FDOURBLEVBQW1CRyxLQXZCQzlJLElBQ25CLElBQUt5RSxFQUFVdUUsRUFBYUMsR0FBV2pKLEVBQ3ZDLElBQUksSUFBSThELEtBQVlrRixFQUNoQm5GLEVBQW9COEMsRUFBRXFDLEVBQWFsRixLQUNyQ0QsRUFBb0JPLEVBQUVOLEdBQVlrRixFQUFZbEYsSUFJaEQsSUFER21GLEdBQVNBLEVBQVFwRixHQUNkWSxFQUFTTSxRQUNkMkQsRUFBZ0JqRSxFQUFTeUUsT0FBUyxFQUNuQ0wsRUFBMkI3SSxFQUFLLEMsS2RuQjdCVCxFQUFPc0UsRUFBb0JRLEVBQy9CUixFQUFvQlEsRUFBSSxJQUNoQlIsRUFBb0I1QyxFQUFFLEtBQUtrRixLQUFLNUcsR2VEZHNFLEVBQW9CUSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ydW50aW1lL2NyZWF0ZSBmYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvc3RhcnR1cCBjaHVuayBkZXBlbmRlbmNpZXMiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC8uL3NyYy9yZXBsaWNhdGlvbl93cy90eXBlcy50cyIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0Ly4vc3JjL2FwaS9zdGFuZGFyZC50cyIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0Ly4vc3JjL3JlcGxpY2F0aW9uX3dzL2Nvbm5lY3Rpb25Xb3JrZXIudHMiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC8uL3NyYy9yZXBsaWNhdGlvbl93cy93ZWJzb2NrZXRQcmltaXRpdmVzLnRzIiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9lbnN1cmUgY2h1bmsiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvZ2V0IGphdmFzY3JpcHQgY2h1bmsgZmlsZW5hbWUiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9pbXBvcnRTY3JpcHRzIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwidmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mID8gKG9iaikgPT4gKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopKSA6IChvYmopID0+IChvYmouX19wcm90b19fKTtcbnZhciBsZWFmUHJvdG90eXBlcztcbi8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLy8gbW9kZSAmIDE2OiByZXR1cm4gdmFsdWUgd2hlbiBpdCdzIFByb21pc2UtbGlrZVxuLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcblx0aWYobW9kZSAmIDEpIHZhbHVlID0gdGhpcyh2YWx1ZSk7XG5cdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG5cdGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUpIHtcblx0XHRpZigobW9kZSAmIDQpICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcblx0XHRpZigobW9kZSAmIDE2KSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG5cdHZhciBkZWYgPSB7fTtcblx0bGVhZlByb3RvdHlwZXMgPSBsZWFmUHJvdG90eXBlcyB8fCBbbnVsbCwgZ2V0UHJvdG8oe30pLCBnZXRQcm90byhbXSksIGdldFByb3RvKGdldFByb3RvKV07XG5cdGZvcih2YXIgY3VycmVudCA9IG1vZGUgJiAyICYmIHZhbHVlOyB0eXBlb2YgY3VycmVudCA9PSAnb2JqZWN0JyAmJiAhfmxlYWZQcm90b3R5cGVzLmluZGV4T2YoY3VycmVudCk7IGN1cnJlbnQgPSBnZXRQcm90byhjdXJyZW50KSkge1xuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGN1cnJlbnQpLmZvckVhY2goKGtleSkgPT4gKGRlZltrZXldID0gKCkgPT4gKHZhbHVlW2tleV0pKSk7XG5cdH1cblx0ZGVmWydkZWZhdWx0J10gPSAoKSA9PiAodmFsdWUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGRlZik7XG5cdHJldHVybiBucztcbn07IiwidmFyIG5leHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLng7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnggPSAoKSA9PiB7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoNDQ2KS50aGVuKG5leHQpO1xufTsiLCJleHBvcnQgY29uc3QgbmV3U2Vzc2lvbiA9ICgpID0+ICh7XHJcbiAgICBzZXNzaW9uSWQ6IFwiXCIsXHJcbiAgICB1c2VySWQ6IFwiXCIsXHJcbiAgICB1c2VyczogbmV3IE1hcCgpLFxyXG59KTtcclxuZXhwb3J0IGNvbnN0IG5ld1JlcGxpY2F0aW9uU3RhdGUgPSAoKSA9PiAoe1xyXG4gICAgY29ubmVjdGlvblN0YXRlOiBcImNsb3NlZFwiLFxyXG4gICAgc2Vzc2lvbklkOiBudWxsLFxyXG59KTtcclxuZXhwb3J0IHZhciBSZXBsaWNhdGlvbkFjdGlvblR5cGU7XHJcbihmdW5jdGlvbiAoUmVwbGljYXRpb25BY3Rpb25UeXBlKSB7XHJcbiAgICBSZXBsaWNhdGlvbkFjdGlvblR5cGVbXCJjcmVhdGluZ1Nlc3Npb25cIl0gPSBcIlJFUExJQ0FUSU9OX0NSRUFUSU5HX1NFU1NJT05cIjtcclxuICAgIFJlcGxpY2F0aW9uQWN0aW9uVHlwZVtcImNvbm5lY3Rpb25SZWFkeVwiXSA9IFwiUkVQTElDQVRJT05fQ09OTkVDVElPTl9SRUFEWVwiO1xyXG4gICAgUmVwbGljYXRpb25BY3Rpb25UeXBlW1wiY29ubmVjdGlvbkNsb3NlZFwiXSA9IFwiUkVQTElDQVRJT05fQ09OTkVDVElPTl9DTE9TRURcIjtcclxuICAgIFJlcGxpY2F0aW9uQWN0aW9uVHlwZVtcImNvbm5lY3Rpb25FcnJvclwiXSA9IFwiUkVQTElDQVRJT05fQ09OTkVDVElPTl9FUlJPUlwiO1xyXG4gICAgUmVwbGljYXRpb25BY3Rpb25UeXBlW1wicmVjZWl2ZU1lc3NhZ2VcIl0gPSBcIlJFUExJQ0FUSU9OX1JFQ0VJVkVfTUVTU0FHRVwiO1xyXG4gICAgUmVwbGljYXRpb25BY3Rpb25UeXBlW1wic2VuZFBpbmdcIl0gPSBcIlJFUExJQ0FUSU9OX1NFTkRfUElOR1wiO1xyXG4gICAgUmVwbGljYXRpb25BY3Rpb25UeXBlW1wibm9vcFwiXSA9IFwiUkVQTElDQVRJT05fTk9PUFwiO1xyXG59KShSZXBsaWNhdGlvbkFjdGlvblR5cGUgfHwgKFJlcGxpY2F0aW9uQWN0aW9uVHlwZSA9IHt9KSk7XHJcbjtcclxuZXhwb3J0IHZhciBTZXNzaW9uQWN0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChTZXNzaW9uQWN0aW9uVHlwZSkge1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJjcmVhdGVcIl0gPSBcIlNFU1NJT05fQ1JFQVRFXCI7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcInN0YXJ0ZWRcIl0gPSBcIlNFU1NJT05fU1RBUlRFRFwiO1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJlbmRlZFwiXSA9IFwiU0VTU0lPTl9FTkRFRFwiO1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJqb2luXCJdID0gXCJTRVNTSU9OX0pPSU5cIjtcclxuICAgIFNlc3Npb25BY3Rpb25UeXBlW1wibGVhdmVcIl0gPSBcIlNFU1NJT05fTEVBVkVcIjtcclxuICAgIFNlc3Npb25BY3Rpb25UeXBlW1wiYWRkVXNlclwiXSA9IFwiU0VTU0lPTl9BRERfVVNFUlwiO1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJyZW1vdmVVc2VyXCJdID0gXCJTRVNTSU9OX1JFTU9WRV9VU0VSXCI7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcImNoYW5nZVVzZXJOYW1lXCJdID0gXCJTRVNTSU9OX0NIQU5HRV9VU0VSX05BTUVcIjtcclxuICAgIFNlc3Npb25BY3Rpb25UeXBlW1widXNlck5hbWVDaGFuZ2VkXCJdID0gXCJTRVNTSU9OX1VTRVJfTkFNRV9DSEFOR0VEXCI7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcInNlbmRNZXNzYWdlXCJdID0gXCJSRVBMSUNBVElPTl9TRU5EX01FU1NBR0VcIjtcclxufSkoU2Vzc2lvbkFjdGlvblR5cGUgfHwgKFNlc3Npb25BY3Rpb25UeXBlID0ge30pKTtcclxuO1xyXG5leHBvcnQgY29uc3QgbmV3VXNlciA9IChpZCwgbmFtZSkgPT4gKHtcclxuICAgIGlkLFxyXG4gICAgbmFtZVxyXG59KTtcclxuZXhwb3J0IHZhciBSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlO1xyXG4oZnVuY3Rpb24gKFJlcGxpY2F0aW9uTWVzc2FnZVR5cGUpIHtcclxuICAgIFJlcGxpY2F0aW9uTWVzc2FnZVR5cGVbXCJhY3Rpb25cIl0gPSBcIkFDVElPTlwiO1xyXG4gICAgLy9jcmVhdGVkID0gXCJDUkVBVEVEXCIsIC8vIHNlcnZlciBkb2VzIG5vdCB0ZWxsIHlvdSB0aGF0XHJcbiAgICBSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlW1wiam9pbmVkXCJdID0gXCJKT0lORURcIjtcclxuICAgIFJlcGxpY2F0aW9uTWVzc2FnZVR5cGVbXCJ1c2VySm9pbmVkXCJdID0gXCJVU0VSX0pPSU5FRFwiO1xyXG4gICAgUmVwbGljYXRpb25NZXNzYWdlVHlwZVtcInVzZXJMZWZ0XCJdID0gXCJVU0VSX0xFRlRcIjtcclxuICAgIFJlcGxpY2F0aW9uTWVzc2FnZVR5cGVbXCJ1c2VyQ2hhbmdlZE5hbWVcIl0gPSBcIlVTRVJfQ0hBTkdFRF9OQU1FXCI7XHJcbiAgICBSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlW1wiZXJyb3JcIl0gPSBcIkVSUk9SXCI7XHJcbn0pKFJlcGxpY2F0aW9uTWVzc2FnZVR5cGUgfHwgKFJlcGxpY2F0aW9uTWVzc2FnZVR5cGUgPSB7fSkpO1xyXG5leHBvcnQgdmFyIENsaWVudFJlcXVlc3RUeXBlO1xyXG4oZnVuY3Rpb24gKENsaWVudFJlcXVlc3RUeXBlKSB7XHJcbiAgICBDbGllbnRSZXF1ZXN0VHlwZVtcImFjdGlvblwiXSA9IFwiQUNUSU9OXCI7XHJcbiAgICBDbGllbnRSZXF1ZXN0VHlwZVtcImNyZWF0ZVwiXSA9IFwiQ1JFQVRFXCI7XHJcbiAgICBDbGllbnRSZXF1ZXN0VHlwZVtcImpvaW5cIl0gPSBcIkpPSU5cIjtcclxuICAgIENsaWVudFJlcXVlc3RUeXBlW1wicGluZ1wiXSA9IFwiUElOR1wiO1xyXG4gICAgQ2xpZW50UmVxdWVzdFR5cGVbXCJjaGFuZ2VOYW1lXCJdID0gXCJDSEFOR0VfTkFNRVwiO1xyXG4gICAgQ2xpZW50UmVxdWVzdFR5cGVbXCJsZWF2ZVwiXSA9IFwiTEVBVkVcIjtcclxufSkoQ2xpZW50UmVxdWVzdFR5cGUgfHwgKENsaWVudFJlcXVlc3RUeXBlID0ge30pKTtcclxuIiwiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyBub3RpZmljYXRpb24gfSBmcm9tICdhbnRkJztcclxuYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXMgPT4ge1xyXG4gICAgaWYgKHJlcy5kYXRhLnN1Y2Nlc3MgIT09IDApIHtcclxuICAgICAgICBub3RpZmljYXRpb24uZXJyb3Ioe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiAn6K2m5ZGKJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlcy5kYXRhLm1lc3NhZ2UsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcyk7XHJcbiAgICB9XHJcbiAgICAvLyDlr7nlk43lupTmlbDmja7lgZrngrnku4DkuYhcclxuICAgIHJldHVybiByZXM7XHJcbn0sIGVycm9yID0+IHtcclxuICAgIC8vIOWvueWTjeW6lOmUmeivr+WBmueCueS7gOS5iFxyXG4gICAgLy8gaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAvLyAgICAgLy8g5aSE55CG5pyq5o6I5p2D55qE5oOF5Ya1XHJcbiAgICAvLyAgICAgLy8g5L6L5aaC6YeN5a6a5ZCR5Yiw55m75b2V6aG16Z2iXHJcbiAgICAvLyB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG59KTtcclxuY29uc3QgYmFzZVVSTCA9IFwiaHR0cDovLzEyNy4wLjAuMTo4MDgwL1wiO1xyXG5leHBvcnQgY29uc3Qgc2F2ZSA9IChkYXRhKSA9PiB7XHJcbiAgICByZXR1cm4gYXhpb3MucG9zdChiYXNlVVJMICsgXCJzYXZlXCIsIGRhdGEpO1xyXG59O1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlID0gKGRhdGEpID0+IHtcclxuICAgIHJldHVybiBheGlvcy5wb3N0KGJhc2VVUkwgKyBcInJlbW92ZVwiLCBkYXRhKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHVwZGF0ZSA9IChkYXRhKSA9PiB7XHJcbiAgICByZXR1cm4gYXhpb3MucG9zdChiYXNlVVJMICsgXCJ1cGRhdGVcIiwgZGF0YSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCByZW1vdmVfYWxsID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGF4aW9zLmdldChiYXNlVVJMICsgXCJyZW1vdmVfYWxsXCIpO1xyXG59O1xyXG5leHBvcnQgY29uc3Qgc2V0X3Nlc3Npb25fdXNlcklkID0gKHVzZXJJZCkgPT4ge1xyXG4gICAgcmV0dXJuIGF4aW9zLmdldChiYXNlVVJMICsgXCJzZXRfc2Vzc2lvbl91c2VySWQ/dXNlcklkPVwiICsgdXNlcklkKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHNldF9zZXNzaW9uSWQgPSAoc2Vzc2lvbklkKSA9PiB7XHJcbiAgICByZXR1cm4gYXhpb3MuZ2V0KGJhc2VVUkwgKyBcInNldF9zZXNzaW9uSWQ/c2Vzc2lvbklkPVwiICsgc2Vzc2lvbklkKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHNldF9zZXJ2ZXJfaXAgPSAoYWRkcmVzcykgPT4ge1xyXG4gICAgcmV0dXJuIGF4aW9zLmdldChiYXNlVVJMICsgXCJzZXRfc2VydmVyX2lwP2FkZHJlc3M9XCIgKyBhZGRyZXNzKTtcclxufTtcclxuIiwiaW1wb3J0IHsgUmVwbGljYXRpb25BY3Rpb25UeXBlIGFzIFJBVCwgUmVwbGljYXRpb25NZXNzYWdlVHlwZSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCAqIGFzIFdTIGZyb20gXCIuL3dlYnNvY2tldFByaW1pdGl2ZXNcIjtcclxuaW1wb3J0IHsgc2V0X3NlcnZlcl9pcCB9IGZyb20gXCIuLi9hcGkvc3RhbmRhcmRcIjtcclxuLy9jb25zb2xlLmxvZyhcIndlYndvcmtlciBydW5uaW5nXCIpXHJcbmxldCB3cyA9IG51bGw7XHJcbmxldCBzZXNzaW9uSWQgPSBudWxsO1xyXG5sZXQgcGluZ1RpbWVyID0gbnVsbDtcclxubGV0IHdzQ2xvc2VkID0gZmFsc2U7XHJcbi8vIFdvcmtlciAnSU8nXHJcbm9ubWVzc2FnZSA9IChlKSA9PiB7XHJcbiAgICBsZXQgbWVzc2FnZSA9IGUuZGF0YTtcclxuICAgIHN3aXRjaCAobWVzc2FnZS5mdW5jKSB7XHJcbiAgICAgICAgY2FzZSBcIkNSRUFURVwiOlxyXG4gICAgICAgICAgICB3cyA9IGNyZWF0ZShtZXNzYWdlLnBheWxvYWQuc2VydmVyQWRkcmVzcywgbWVzc2FnZS5wYXlsb2FkLnNlcmlhbGl6YWJsZVN0YXRlKTtcclxuICAgICAgICAgICAgc2V0X3NlcnZlcl9pcChtZXNzYWdlLnBheWxvYWQuc2VydmVyQWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNhc2UgXCJKT0lOXCI6XHJcbiAgICAgICAgICAgIHdzID0gam9pbihtZXNzYWdlLnBheWxvYWQuc2VydmVyQWRkcmVzcywgbWVzc2FnZS5wYXlsb2FkLnNlc3Npb25JZCk7XHJcbiAgICAgICAgICAgIHNldF9zZXJ2ZXJfaXAobWVzc2FnZS5wYXlsb2FkLnNlcnZlckFkZHJlc3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICBjYXNlIFwiQ0hBTkdFX05BTUVcIjpcclxuICAgICAgICAgICAgaWYgKHdzICYmIHNlc3Npb25JZClcclxuICAgICAgICAgICAgICAgIFdTLmNoYW5nZU5hbWUod3MsIG1lc3NhZ2UucGF5bG9hZC5uZXdOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY2FzZSBcIlRFUk1JTkFURVwiOlxyXG4gICAgICAgICAgICBpZiAod3MpXHJcbiAgICAgICAgICAgICAgICB0ZXJtaW5hdGUod3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICBjYXNlIFwiU0VORFwiOlxyXG4gICAgICAgICAgICBpZiAod3MgJiYgc2Vzc2lvbklkKVxyXG4gICAgICAgICAgICAgICAgV1Muc2VuZCh3cywgbWVzc2FnZS5wYXlsb2FkLm1lc3NhZ2UpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBzZW5kVG9NYWluID0gKG1lc3NhZ2UpID0+IHtcclxuICAgIHBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xyXG59O1xyXG5jb25zdCBkaXNwYXRjaCA9IChhY3Rpb24pID0+IHtcclxuICAgIHNlbmRUb01haW4oeyBldmVudDogXCJESVNQQVRDSFwiLCBwYXlsb2FkOiB7IGFjdGlvbiB9IH0pO1xyXG59O1xyXG4vLyBDb25uZWN0aW9uIHNldHVwXHJcbmNvbnN0IGNvbnN0cnVjdG9yID0gKHNlcnZlckFkZHJlc3MpID0+IHtcclxuICAgIGxldCB3cyA9IG5ldyBXZWJTb2NrZXQoc2VydmVyQWRkcmVzcyk7XHJcbiAgICB3cy5vbm1lc3NhZ2UgPSAoZXYpID0+IG9uTWVzc2FnZShldik7XHJcbiAgICB3cy5vbmNsb3NlID0gKGV2KSA9PiBvbkNsb3NlKGV2KTtcclxuICAgIHdzLm9uZXJyb3IgPSAoZXYpID0+IG9uRXJyb3IoZXYpO1xyXG4gICAgcmV0dXJuIHdzO1xyXG59O1xyXG5jb25zdCBjcmVhdGUgPSAoc2VydmVyQWRkcmVzcywgc2VyaWFsaXphYmxlU3RhdGUpID0+IHtcclxuICAgIGxldCB3cyA9IGNvbnN0cnVjdG9yKHNlcnZlckFkZHJlc3MpO1xyXG4gICAgc3RhcnRQaW5nVGltZXIod3MpO1xyXG4gICAgd3Mub25vcGVuID0gKGV2KSA9PiB7XHJcbiAgICAgICAgV1MuY3JlYXRlU2Vzc2lvbih3cywgc2VyaWFsaXphYmxlU3RhdGUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB3cztcclxufTtcclxuY29uc3Qgam9pbiA9IChzZXJ2ZXJBZGRyZXNzLCBzZXNzaW9uSWQpID0+IHtcclxuICAgIGxldCB3cyA9IGNvbnN0cnVjdG9yKHNlcnZlckFkZHJlc3MpO1xyXG4gICAgc3RhcnRQaW5nVGltZXIod3MpO1xyXG4gICAgd3Mub25vcGVuID0gKGV2KSA9PiB7XHJcbiAgICAgICAgV1Muam9pblNlc3Npb24od3MsIHNlc3Npb25JZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHdzO1xyXG59O1xyXG5jb25zdCBzdGFydFBpbmdUaW1lciA9ICh3cykgPT4ge1xyXG4gICAgcGluZ1RpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIFdTLnNlbmRQaW5nKHdzKTtcclxuICAgIH0sIDEwMDApO1xyXG59O1xyXG4vLyB0ZWFyZG93blxyXG5jb25zdCB0ZXJtaW5hdGUgPSAod3MpID0+IHtcclxuICAgIHdzQ2xvc2VkID0gdHJ1ZTtcclxuICAgIHNlc3Npb25JZCA9IG51bGw7XHJcbiAgICBpZiAocGluZ1RpbWVyICE9PSBudWxsKVxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwocGluZ1RpbWVyKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgV1MubGVhdmVTZXNzaW9uKHdzKTtcclxuICAgICAgICB3cy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIC8vIG5vdGhpbmcgdG8gZG8gaGVyZS5cclxuICAgIH1cclxufTtcclxuLy8gV2Vic29ja2V0IGJlaGF2aW9yXHJcbmNvbnN0IG9uTWVzc2FnZSA9IChldikgPT4ge1xyXG4gICAgbGV0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2LmRhdGEpO1xyXG4gICAgaWYgKG1lc3NhZ2UuY29tbWFuZCA9PSBSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlLmVycm9yKSB7XHJcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBSQVQucmVjZWl2ZU1lc3NhZ2UsIHBheWxvYWQ6IHsgbWVzc2FnZSwgc2Vzc2lvbklkOiBcIlwiIH0gfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobWVzc2FnZS5jb21tYW5kID09IFJlcGxpY2F0aW9uTWVzc2FnZVR5cGUuam9pbmVkKSB7XHJcbiAgICAgICAgc2Vzc2lvbklkID0gbWVzc2FnZS5wYXlsb2FkLnNlc3Npb25JZDtcclxuICAgICAgICBzZW5kVG9NYWluKHsgZXZlbnQ6IFwiU0VTU0lPTl9JRFwiLCBwYXlsb2FkOiBtZXNzYWdlLnBheWxvYWQgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc2Vzc2lvbklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBSQVQucmVjZWl2ZU1lc3NhZ2UsIHBheWxvYWQ6IHsgbWVzc2FnZSwgc2Vzc2lvbklkOiBzZXNzaW9uSWQgfSB9KTtcclxuICAgIH1cclxufTtcclxuY29uc3Qgb25DbG9zZSA9IChldikgPT4ge1xyXG4gICAgaWYgKHdzKVxyXG4gICAgICAgIHRlcm1pbmF0ZSh3cyk7XHJcbiAgICBzZW5kVG9NYWluKHsgZXZlbnQ6IFwiQ0xPU0VcIiB9KTtcclxufTtcclxuY29uc3Qgb25FcnJvciA9IChldikgPT4ge1xyXG4gICAgaWYgKHdzKVxyXG4gICAgICAgIHRlcm1pbmF0ZSh3cyk7XHJcbiAgICBzZW5kVG9NYWluKHsgZXZlbnQ6IFwiRVJST1JcIiwgcGF5bG9hZDogeyBtc2c6IFwiXCIgfSB9KTtcclxufTtcclxuIiwiaW1wb3J0IHsgQ2xpZW50UmVxdWVzdFR5cGUgfSBmcm9tIFwiLi4vcmVwbGljYXRpb25fd3MvdHlwZXNcIjtcclxuLyogZm9yIHJlZmVyZW5jZSBvbmx5XHJcbmNvbnN0IG5ld0Nvbm5lY3Rpb24gPSAoXHJcbiAgdXJpOiBzdHJpbmcsXHJcbiAgb25PcGVuOiAoZXY6IEV2ZW50KSA9PiBhbnksXHJcbiAgb25NZXNzYWdlOiAoZXY6IE1lc3NhZ2VFdmVudCkgPT4gYW55LFxyXG4gIG9uQ2xvc2U6IChldjogQ2xvc2VFdmVudCkgPT4gYW55LFxyXG4gIG9uRXJyb3I6IChldjogRXZlbnQpID0+IGFueVxyXG4pOiBXZWJTb2NrZXQgPT4ge1xyXG4gIGxldCB3cyA9IG5ldyBXZWJTb2NrZXQodXJpKTtcclxuICB3cy5vbm9wZW4gPSBvbk9wZW47XHJcbiAgd3Mub25tZXNzYWdlID0gKGV2OiBNZXNzYWdlRXZlbnQpOiBhbnkgPT4ge1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIm1lc3NhZ2U6IFwiLCBldi5kYXRhKTtcclxuICAgIG9uTWVzc2FnZShldik7XHJcbiAgfTtcclxuICB3cy5vbmNsb3NlID0gKGV2OiBDbG9zZUV2ZW50KTogYW55ID0+IHtcclxuICAgIG9uQ2xvc2UoZXYpO1xyXG4gIH07XHJcbiAgd3Mub25lcnJvciA9IG9uRXJyb3I7XHJcbiAgcmV0dXJuIHdzO1xyXG59XHJcbiovXHJcbmV4cG9ydCBjb25zdCBzZW5kID0gKHdzLCBtZXNzYWdlKSA9PiB7XHJcbiAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHNlbmRQaW5nID0gKHdzKSA9PiB7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwic2VuZGluZyBwaW5nXCIpXHJcbiAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHsgY29tbWFuZDogQ2xpZW50UmVxdWVzdFR5cGUucGluZyB9KSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVTZXNzaW9uID0gKHdzLCBzZXJpemFibGVTdGF0ZSkgPT4ge1xyXG4gICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7IGNvbW1hbmQ6IENsaWVudFJlcXVlc3RUeXBlLmNyZWF0ZSwgcGF5bG9hZDogeyBzdGF0ZTogc2VyaXphYmxlU3RhdGUgfSB9KSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBqb2luU2Vzc2lvbiA9ICh3cywgc2Vzc2lvbklkKSA9PiB7XHJcbiAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHsgY29tbWFuZDogQ2xpZW50UmVxdWVzdFR5cGUuam9pbiwgcGF5bG9hZDogeyBzZXNzaW9uSWQgfSB9KSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBjaGFuZ2VOYW1lID0gKHdzLCBuYW1lKSA9PiB7XHJcbiAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHsgY29tbWFuZDogQ2xpZW50UmVxdWVzdFR5cGUuY2hhbmdlTmFtZSwgcGF5bG9hZDogeyBuYW1lIH0gfSkpO1xyXG59O1xyXG5leHBvcnQgY29uc3QgbGVhdmVTZXNzaW9uID0gKHdzKSA9PiB7XHJcbiAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHsgY29tbWFuZDogQ2xpZW50UmVxdWVzdFR5cGUubGVhdmUgfSkpO1xyXG4gICAgd3MuY2xvc2UoKTtcclxufTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4vLyB0aGUgc3RhcnR1cCBmdW5jdGlvblxuX193ZWJwYWNrX3JlcXVpcmVfXy54ID0gKCkgPT4ge1xuXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcblx0Ly8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG5cdHZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzQ0Nl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDUwNDYpKSlcblx0X193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcblx0cmV0dXJuIF9fd2VicGFja19leHBvcnRzX187XG59O1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3MgYW5kIHNpYmxpbmcgY2h1bmtzIGZvciB0aGUgZW50cnlwb2ludFxuX193ZWJwYWNrX3JlcXVpcmVfXy51ID0gKGNodW5rSWQpID0+IHtcblx0Ly8gcmV0dXJuIHVybCBmb3IgZmlsZW5hbWVzIGJhc2VkIG9uIHRlbXBsYXRlXG5cdHJldHVybiBcIlwiICsgY2h1bmtJZCArIFwiLmFwcC5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICghc2NyaXB0VXJsIHx8ICEvXmh0dHAocz8pOi8udGVzdChzY3JpcHRVcmwpKSkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBjaHVua3Ncbi8vIFwiMVwiIG1lYW5zIFwiYWxyZWFkeSBsb2FkZWRcIlxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NDY6IDFcbn07XG5cbi8vIGltcG9ydFNjcmlwdHMgY2h1bmsgbG9hZGluZ1xudmFyIGluc3RhbGxDaHVuayA9IChkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHR9XG5cdH1cblx0aWYocnVudGltZSkgcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0d2hpbGUoY2h1bmtJZHMubGVuZ3RoKVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkcy5wb3AoKV0gPSAxO1xuXHRwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcbn07XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmYuaSA9IChjaHVua0lkLCBwcm9taXNlcykgPT4ge1xuXHQvLyBcIjFcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcblx0aWYoIWluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdGlmKHRydWUpIHsgLy8gYWxsIGNodW5rcyBoYXZlIEpTXG5cdFx0XHRpbXBvcnRTY3JpcHRzKF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKSk7XG5cdFx0fVxuXHR9XG59O1xuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua3NxdWFkc3RyYXRcIl0gPSBzZWxmW1wid2VicGFja0NodW5rc3F1YWRzdHJhdFwiXSB8fCBbXTtcbnZhciBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiA9IGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gaW5zdGFsbENodW5rO1xuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0IiwiLy8gcnVuIHN0YXJ0dXBcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy54KCk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJsZWFmUHJvdG90eXBlcyIsImdldFByb3RvIiwibmV4dCIsIlJlcGxpY2F0aW9uQWN0aW9uVHlwZSIsIlNlc3Npb25BY3Rpb25UeXBlIiwiUmVwbGljYXRpb25NZXNzYWdlVHlwZSIsIkNsaWVudFJlcXVlc3RUeXBlIiwiaW50ZXJjZXB0b3JzIiwicmVzcG9uc2UiLCJ1c2UiLCJyZXMiLCJkYXRhIiwic3VjY2VzcyIsIm5vdGlmaWNhdGlvbiIsImVycm9yIiwibWVzc2FnZSIsImRlc2NyaXB0aW9uIiwiUHJvbWlzZSIsInJlamVjdCIsInNldF9zZXJ2ZXJfaXAiLCJhZGRyZXNzIiwiZ2V0IiwiYmFzZVVSTCIsIndzIiwic2Vzc2lvbklkIiwicGluZ1RpbWVyIiwid3NDbG9zZWQiLCJvbm1lc3NhZ2UiLCJlIiwiZnVuYyIsImNyZWF0ZSIsInBheWxvYWQiLCJzZXJ2ZXJBZGRyZXNzIiwic2VyaWFsaXphYmxlU3RhdGUiLCJqb2luIiwibmFtZSIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiY29tbWFuZCIsImNoYW5nZU5hbWUiLCJuZXdOYW1lIiwidGVybWluYXRlIiwic2VuZFRvTWFpbiIsInBvc3RNZXNzYWdlIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJldmVudCIsIldlYlNvY2tldCIsImV2Iiwib25NZXNzYWdlIiwib25jbG9zZSIsIm9uQ2xvc2UiLCJvbmVycm9yIiwib25FcnJvciIsInN0YXJ0UGluZ1RpbWVyIiwib25vcGVuIiwic2VyaXphYmxlU3RhdGUiLCJzdGF0ZSIsInNldEludGVydmFsIiwicGluZyIsImNsZWFySW50ZXJ2YWwiLCJsZWF2ZSIsImNsb3NlIiwiY29uc29sZSIsImxvZyIsInBhcnNlIiwidHlwZSIsInJlY2VpdmVNZXNzYWdlIiwiam9pbmVkIiwibXNnIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwieCIsIl9fd2VicGFja19leHBvcnRzX18iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsImtleSIsInNwbGljZSIsInIiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZ2V0UHJvdG90eXBlT2YiLCJvYmoiLCJ0IiwidmFsdWUiLCJtb2RlIiwidGhpcyIsInRoZW4iLCJucyIsImRlZiIsImN1cnJlbnQiLCJpbmRleE9mIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvckVhY2giLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImYiLCJjaHVua0lkIiwiYWxsIiwicmVkdWNlIiwicHJvbWlzZXMiLCJ1IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIndpbmRvdyIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRlc3QiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwicHVzaCIsImJpbmQiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJwb3AiXSwic291cmNlUm9vdCI6IiJ9