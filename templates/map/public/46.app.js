(()=>{"use strict";var e,r,t,n,o={5046:(e,r,t)=>{var n,o,a,s;!function(e){e.creatingSession="REPLICATION_CREATING_SESSION",e.connectionReady="REPLICATION_CONNECTION_READY",e.connectionClosed="REPLICATION_CONNECTION_CLOSED",e.connectionError="REPLICATION_CONNECTION_ERROR",e.receiveMessage="REPLICATION_RECEIVE_MESSAGE",e.sendPing="REPLICATION_SEND_PING",e.noop="REPLICATION_NOOP"}(n||(n={})),function(e){e.create="SESSION_CREATE",e.started="SESSION_STARTED",e.ended="SESSION_ENDED",e.join="SESSION_JOIN",e.leave="SESSION_LEAVE",e.addUser="SESSION_ADD_USER",e.removeUser="SESSION_REMOVE_USER",e.changeUserName="SESSION_CHANGE_USER_NAME",e.userNameChanged="SESSION_USER_NAME_CHANGED",e.sendMessage="REPLICATION_SEND_MESSAGE"}(o||(o={})),function(e){e.action="ACTION",e.joined="JOINED",e.userJoined="USER_JOINED",e.userLeft="USER_LEFT",e.userChangedName="USER_CHANGED_NAME",e.error="ERROR"}(a||(a={})),function(e){e.action="ACTION",e.create="CREATE",e.join="JOIN",e.ping="PING",e.changeName="CHANGE_NAME",e.leave="LEAVE"}(s||(s={}));var i=t(7536),l=t(6511);i.A.interceptors.response.use((e=>0!==e.data.success?(l.Ay.error({message:"警告",description:e.data.message}),Promise.reject(e)):e),(e=>Promise.reject(e)));const c=`http://${"undefined"!=typeof window?window.location.hostname:self.location.hostname}:8080/`,d=e=>i.A.get(c+"set_server_ip?address="+e);let E=null,p=null,u=null,S=!1;onmessage=e=>{let r=e.data;switch(r.func){case"CREATE":return E=g(r.payload.serverAddress,r.payload.serializableState),d(r.payload.serverAddress),null;case"JOIN":return E=y(r.payload.serverAddress,r.payload.sessionId),d(r.payload.serverAddress),null;case"CHANGE_NAME":return E&&p&&((e,r)=>{e.send(JSON.stringify({command:s.changeName,payload:{name:r}}))})(E,r.payload.newName),null;case"TERMINATE":return E&&_(E),null;case"SEND":E&&p&&((e,r)=>{e.send(JSON.stringify(r))})(E,r.payload.message);default:return null}};const N=e=>{postMessage(e)},O=e=>{N({event:"DISPATCH",payload:{action:e}})},f=e=>{let r=new WebSocket(e);return r.onmessage=e=>m(e),r.onclose=e=>v(e),r.onerror=e=>A(e),r},g=(e,r)=>{let t=f(e);return I(t),t.onopen=e=>{((e,r)=>{e.send(JSON.stringify({command:s.create,payload:{state:r}}))})(t,r)},t},y=(e,r)=>{let t=f(e);return I(t),t.onopen=e=>{((e,r)=>{e.send(JSON.stringify({command:s.join,payload:{sessionId:r}}))})(t,r)},t},I=e=>{u=setInterval((()=>{(e=>{e.send(JSON.stringify({command:s.ping}))})(e)}),1e3)},_=e=>{S=!0,p=null,null!==u&&clearInterval(u);try{(e=>{e.send(JSON.stringify({command:s.leave})),e.close()})(e),e.close()}catch(e){console.log(e)}},m=e=>{let r=JSON.parse(e.data);r.command==a.error&&O({type:n.receiveMessage,payload:{message:r,sessionId:""}}),r.command==a.joined&&(p=r.payload.sessionId,N({event:"SESSION_ID",payload:r.payload})),null!==p&&O({type:n.receiveMessage,payload:{message:r,sessionId:p}})},v=e=>{E&&_(E),N({event:"CLOSE"})},A=e=>{E&&_(E),N({event:"ERROR",payload:{msg:""}})}}},a={};function s(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return o[e](t,t.exports,s),t.exports}s.m=o,s.x=()=>{var e=s.O(void 0,[446],(()=>s(5046)));return s.O(e)},e=[],s.O=(r,t,n,o)=>{if(!t){var a=1/0;for(d=0;d<e.length;d++){for(var[t,n,o]=e[d],i=!0,l=0;l<t.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](t[l])))?t.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(d--,1);var c=n();void 0!==c&&(r=c)}}return r}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[t,n,o]},s.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return s.d(r,{a:r}),r},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);s.r(o);var a={};r=r||[null,t({}),t([]),t(t)];for(var i=2&n&&e;"object"==typeof i&&!~r.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((r=>a[r]=()=>e[r]));return a.default=()=>e,s.d(o,a),o},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((r,t)=>(s.f[t](e,r),r)),[])),s.u=e=>e+".app.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var r=s.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");if(t.length)for(var n=t.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=t[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={46:1};s.f.i=(r,t)=>{e[r]||importScripts(s.p+s.u(r))};var r=self.webpackChunksquadstrat=self.webpackChunksquadstrat||[],t=r.push.bind(r);r.push=r=>{var[n,o,a]=r;for(var i in o)s.o(o,i)&&(s.m[i]=o[i]);for(a&&a(s);n.length;)e[n.pop()]=1;t(r)}})(),n=s.x,s.x=()=>s.e(446).then(n),s.x()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmlELEVBQUVoQyxFQUFJLENBQUNpQyxFQUFTRyxLQUUvQnNCLEVBQWdCekIsSUFFbEJlLGNBQWNqRSxFQUFvQjBFLEVBQUkxRSxFQUFvQnNELEVBQUVKLEdBRTlELEVBR0QsSUFBSTBCLEVBQXFCakksS0FBNkIsdUJBQUlBLEtBQTZCLHdCQUFLLEdBQ3hGa0ksRUFBNkJELEVBQW1CRSxLQUFLQyxLQUFLSCxHQUM5REEsRUFBbUJFLEtBdkJDL0ksSUFDbkIsSUFBSzZFLEVBQVVvRSxFQUFhQyxHQUFXbEosRUFDdkMsSUFBSSxJQUFJa0UsS0FBWStFLEVBQ2hCaEYsRUFBb0I4QyxFQUFFa0MsRUFBYS9FLEtBQ3JDRCxFQUFvQk8sRUFBRU4sR0FBWStFLEVBQVkvRSxJQUloRCxJQURHZ0YsR0FBU0EsRUFBUWpGLEdBQ2RZLEVBQVNNLFFBQ2R5RCxFQUFnQi9ELEVBQVNzRSxPQUFTLEVBQ25DTCxFQUEyQjlJLEVBQUssQyxLZG5CN0JULEVBQU8wRSxFQUFvQlEsRUFDL0JSLEVBQW9CUSxFQUFJLElBQ2hCUixFQUFvQjVDLEVBQUUsS0FBS2tGLEtBQUtoSCxHZURkMEUsRUFBb0JRLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9jaHVuayBsb2FkZWQiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvY3JlYXRlIGZha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9zdGFydHVwIGNodW5rIGRlcGVuZGVuY2llcyIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0Ly4vc3JjL3JlcGxpY2F0aW9uX3dzL3R5cGVzLnRzIiwid2VicGFjazovL3NxdWFkc3RyYXQvLi9zcmMvYXBpL3N0YW5kYXJkLnRzIiwid2VicGFjazovL3NxdWFkc3RyYXQvLi9zcmMvcmVwbGljYXRpb25fd3MvY29ubmVjdGlvbldvcmtlci50cyIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0Ly4vc3JjL3JlcGxpY2F0aW9uX3dzL3dlYnNvY2tldFByaW1pdGl2ZXMudHMiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vc3F1YWRzdHJhdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3NxdWFkc3RyYXQvd2VicGFjay9ydW50aW1lL2ltcG9ydFNjcmlwdHMgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9zcXVhZHN0cmF0L3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJ2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAob2JqKSA9PiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpIDogKG9iaikgPT4gKG9iai5fX3Byb3RvX18pO1xudmFyIGxlYWZQcm90b3R5cGVzO1xuLy8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLy8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vLyBtb2RlICYgMTY6IHJldHVybiB2YWx1ZSB3aGVuIGl0J3MgUHJvbWlzZS1saWtlXG4vLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuXHRpZihtb2RlICYgMSkgdmFsdWUgPSB0aGlzKHZhbHVlKTtcblx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcblx0aWYodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGlmKChtb2RlICYgNCkgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHRcdGlmKChtb2RlICYgMTYpICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdmFsdWU7XG5cdH1cblx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcblx0dmFyIGRlZiA9IHt9O1xuXHRsZWFmUHJvdG90eXBlcyA9IGxlYWZQcm90b3R5cGVzIHx8IFtudWxsLCBnZXRQcm90byh7fSksIGdldFByb3RvKFtdKSwgZ2V0UHJvdG8oZ2V0UHJvdG8pXTtcblx0Zm9yKHZhciBjdXJyZW50ID0gbW9kZSAmIDIgJiYgdmFsdWU7IHR5cGVvZiBjdXJyZW50ID09ICdvYmplY3QnICYmICF+bGVhZlByb3RvdHlwZXMuaW5kZXhPZihjdXJyZW50KTsgY3VycmVudCA9IGdldFByb3RvKGN1cnJlbnQpKSB7XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudCkuZm9yRWFjaCgoa2V5KSA9PiAoZGVmW2tleV0gPSAoKSA9PiAodmFsdWVba2V5XSkpKTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+ICh2YWx1ZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChucywgZGVmKTtcblx0cmV0dXJuIG5zO1xufTsiLCJ2YXIgbmV4dCA9IF9fd2VicGFja19yZXF1aXJlX18ueDtcbl9fd2VicGFja19yZXF1aXJlX18ueCA9ICgpID0+IHtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZSg0NDYpLnRoZW4obmV4dCk7XG59OyIsImV4cG9ydCBjb25zdCBuZXdTZXNzaW9uID0gKCkgPT4gKHtcclxuICAgIHNlc3Npb25JZDogXCJcIixcclxuICAgIHVzZXJJZDogXCJcIixcclxuICAgIHVzZXJzOiBuZXcgTWFwKCksXHJcbn0pO1xyXG5leHBvcnQgY29uc3QgbmV3UmVwbGljYXRpb25TdGF0ZSA9ICgpID0+ICh7XHJcbiAgICBjb25uZWN0aW9uU3RhdGU6IFwiY2xvc2VkXCIsXHJcbiAgICBzZXNzaW9uSWQ6IG51bGwsXHJcbn0pO1xyXG5leHBvcnQgdmFyIFJlcGxpY2F0aW9uQWN0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChSZXBsaWNhdGlvbkFjdGlvblR5cGUpIHtcclxuICAgIFJlcGxpY2F0aW9uQWN0aW9uVHlwZVtcImNyZWF0aW5nU2Vzc2lvblwiXSA9IFwiUkVQTElDQVRJT05fQ1JFQVRJTkdfU0VTU0lPTlwiO1xyXG4gICAgUmVwbGljYXRpb25BY3Rpb25UeXBlW1wiY29ubmVjdGlvblJlYWR5XCJdID0gXCJSRVBMSUNBVElPTl9DT05ORUNUSU9OX1JFQURZXCI7XHJcbiAgICBSZXBsaWNhdGlvbkFjdGlvblR5cGVbXCJjb25uZWN0aW9uQ2xvc2VkXCJdID0gXCJSRVBMSUNBVElPTl9DT05ORUNUSU9OX0NMT1NFRFwiO1xyXG4gICAgUmVwbGljYXRpb25BY3Rpb25UeXBlW1wiY29ubmVjdGlvbkVycm9yXCJdID0gXCJSRVBMSUNBVElPTl9DT05ORUNUSU9OX0VSUk9SXCI7XHJcbiAgICBSZXBsaWNhdGlvbkFjdGlvblR5cGVbXCJyZWNlaXZlTWVzc2FnZVwiXSA9IFwiUkVQTElDQVRJT05fUkVDRUlWRV9NRVNTQUdFXCI7XHJcbiAgICBSZXBsaWNhdGlvbkFjdGlvblR5cGVbXCJzZW5kUGluZ1wiXSA9IFwiUkVQTElDQVRJT05fU0VORF9QSU5HXCI7XHJcbiAgICBSZXBsaWNhdGlvbkFjdGlvblR5cGVbXCJub29wXCJdID0gXCJSRVBMSUNBVElPTl9OT09QXCI7XHJcbn0pKFJlcGxpY2F0aW9uQWN0aW9uVHlwZSB8fCAoUmVwbGljYXRpb25BY3Rpb25UeXBlID0ge30pKTtcclxuO1xyXG5leHBvcnQgdmFyIFNlc3Npb25BY3Rpb25UeXBlO1xyXG4oZnVuY3Rpb24gKFNlc3Npb25BY3Rpb25UeXBlKSB7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcImNyZWF0ZVwiXSA9IFwiU0VTU0lPTl9DUkVBVEVcIjtcclxuICAgIFNlc3Npb25BY3Rpb25UeXBlW1wic3RhcnRlZFwiXSA9IFwiU0VTU0lPTl9TVEFSVEVEXCI7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcImVuZGVkXCJdID0gXCJTRVNTSU9OX0VOREVEXCI7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcImpvaW5cIl0gPSBcIlNFU1NJT05fSk9JTlwiO1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJsZWF2ZVwiXSA9IFwiU0VTU0lPTl9MRUFWRVwiO1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJhZGRVc2VyXCJdID0gXCJTRVNTSU9OX0FERF9VU0VSXCI7XHJcbiAgICBTZXNzaW9uQWN0aW9uVHlwZVtcInJlbW92ZVVzZXJcIl0gPSBcIlNFU1NJT05fUkVNT1ZFX1VTRVJcIjtcclxuICAgIFNlc3Npb25BY3Rpb25UeXBlW1wiY2hhbmdlVXNlck5hbWVcIl0gPSBcIlNFU1NJT05fQ0hBTkdFX1VTRVJfTkFNRVwiO1xyXG4gICAgU2Vzc2lvbkFjdGlvblR5cGVbXCJ1c2VyTmFtZUNoYW5nZWRcIl0gPSBcIlNFU1NJT05fVVNFUl9OQU1FX0NIQU5HRURcIjtcclxuICAgIFNlc3Npb25BY3Rpb25UeXBlW1wic2VuZE1lc3NhZ2VcIl0gPSBcIlJFUExJQ0FUSU9OX1NFTkRfTUVTU0FHRVwiO1xyXG59KShTZXNzaW9uQWN0aW9uVHlwZSB8fCAoU2Vzc2lvbkFjdGlvblR5cGUgPSB7fSkpO1xyXG47XHJcbmV4cG9ydCBjb25zdCBuZXdVc2VyID0gKGlkLCBuYW1lKSA9PiAoe1xyXG4gICAgaWQsXHJcbiAgICBuYW1lXHJcbn0pO1xyXG5leHBvcnQgdmFyIFJlcGxpY2F0aW9uTWVzc2FnZVR5cGU7XHJcbihmdW5jdGlvbiAoUmVwbGljYXRpb25NZXNzYWdlVHlwZSkge1xyXG4gICAgUmVwbGljYXRpb25NZXNzYWdlVHlwZVtcImFjdGlvblwiXSA9IFwiQUNUSU9OXCI7XHJcbiAgICAvL2NyZWF0ZWQgPSBcIkNSRUFURURcIiwgLy8gc2VydmVyIGRvZXMgbm90IHRlbGwgeW91IHRoYXRcclxuICAgIFJlcGxpY2F0aW9uTWVzc2FnZVR5cGVbXCJqb2luZWRcIl0gPSBcIkpPSU5FRFwiO1xyXG4gICAgUmVwbGljYXRpb25NZXNzYWdlVHlwZVtcInVzZXJKb2luZWRcIl0gPSBcIlVTRVJfSk9JTkVEXCI7XHJcbiAgICBSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlW1widXNlckxlZnRcIl0gPSBcIlVTRVJfTEVGVFwiO1xyXG4gICAgUmVwbGljYXRpb25NZXNzYWdlVHlwZVtcInVzZXJDaGFuZ2VkTmFtZVwiXSA9IFwiVVNFUl9DSEFOR0VEX05BTUVcIjtcclxuICAgIFJlcGxpY2F0aW9uTWVzc2FnZVR5cGVbXCJlcnJvclwiXSA9IFwiRVJST1JcIjtcclxufSkoUmVwbGljYXRpb25NZXNzYWdlVHlwZSB8fCAoUmVwbGljYXRpb25NZXNzYWdlVHlwZSA9IHt9KSk7XHJcbmV4cG9ydCB2YXIgQ2xpZW50UmVxdWVzdFR5cGU7XHJcbihmdW5jdGlvbiAoQ2xpZW50UmVxdWVzdFR5cGUpIHtcclxuICAgIENsaWVudFJlcXVlc3RUeXBlW1wiYWN0aW9uXCJdID0gXCJBQ1RJT05cIjtcclxuICAgIENsaWVudFJlcXVlc3RUeXBlW1wiY3JlYXRlXCJdID0gXCJDUkVBVEVcIjtcclxuICAgIENsaWVudFJlcXVlc3RUeXBlW1wiam9pblwiXSA9IFwiSk9JTlwiO1xyXG4gICAgQ2xpZW50UmVxdWVzdFR5cGVbXCJwaW5nXCJdID0gXCJQSU5HXCI7XHJcbiAgICBDbGllbnRSZXF1ZXN0VHlwZVtcImNoYW5nZU5hbWVcIl0gPSBcIkNIQU5HRV9OQU1FXCI7XHJcbiAgICBDbGllbnRSZXF1ZXN0VHlwZVtcImxlYXZlXCJdID0gXCJMRUFWRVwiO1xyXG59KShDbGllbnRSZXF1ZXN0VHlwZSB8fCAoQ2xpZW50UmVxdWVzdFR5cGUgPSB7fSkpO1xyXG4iLCJpbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XHJcbmltcG9ydCB7IG5vdGlmaWNhdGlvbiB9IGZyb20gJ2FudGQnO1xyXG5heGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlcyA9PiB7XHJcbiAgICBpZiAocmVzLmRhdGEuc3VjY2VzcyAhPT0gMCkge1xyXG4gICAgICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICforablkYonLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzLmRhdGEubWVzc2FnZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTtcclxuICAgIH1cclxuICAgIC8vIOWvueWTjeW6lOaVsOaNruWBmueCueS7gOS5iFxyXG4gICAgcmV0dXJuIHJlcztcclxufSwgZXJyb3IgPT4ge1xyXG4gICAgLy8g5a+55ZON5bqU6ZSZ6K+v5YGa54K55LuA5LmIXHJcbiAgICAvLyBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcclxuICAgIC8vICAgICAvLyDlpITnkIbmnKrmjojmnYPnmoTmg4XlhrVcclxuICAgIC8vICAgICAvLyDkvovlpoLph43lrprlkJHliLDnmbvlvZXpobXpnaJcclxuICAgIC8vIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbn0pO1xyXG5jb25zdCBiYXNlVVJMID0gYGh0dHA6Ly8keyh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSA/IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA6IHNlbGYubG9jYXRpb24uaG9zdG5hbWV9OjgwODAvYDtcclxuZXhwb3J0IGNvbnN0IHNhdmUgPSAoZGF0YSkgPT4ge1xyXG4gICAgcmV0dXJuIGF4aW9zLnBvc3QoYmFzZVVSTCArIFwic2F2ZVwiLCBkYXRhKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHJlbW92ZSA9IChkYXRhKSA9PiB7XHJcbiAgICByZXR1cm4gYXhpb3MucG9zdChiYXNlVVJMICsgXCJyZW1vdmVcIiwgZGF0YSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCB1cGRhdGUgPSAoZGF0YSkgPT4ge1xyXG4gICAgcmV0dXJuIGF4aW9zLnBvc3QoYmFzZVVSTCArIFwidXBkYXRlXCIsIGRhdGEpO1xyXG59O1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlX2FsbCA9ICgpID0+IHtcclxuICAgIHJldHVybiBheGlvcy5nZXQoYmFzZVVSTCArIFwicmVtb3ZlX2FsbFwiKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IHNldF9zZXNzaW9uX3VzZXJJZCA9ICh1c2VySWQpID0+IHtcclxuICAgIHJldHVybiBheGlvcy5nZXQoYmFzZVVSTCArIFwic2V0X3Nlc3Npb25fdXNlcklkP3VzZXJJZD1cIiArIHVzZXJJZCk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBzZXRfc2Vzc2lvbklkID0gKHNlc3Npb25JZCkgPT4ge1xyXG4gICAgcmV0dXJuIGF4aW9zLmdldChiYXNlVVJMICsgXCJzZXRfc2Vzc2lvbklkP3Nlc3Npb25JZD1cIiArIHNlc3Npb25JZCk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBzZXRfc2VydmVyX2lwID0gKGFkZHJlc3MpID0+IHtcclxuICAgIHJldHVybiBheGlvcy5nZXQoYmFzZVVSTCArIFwic2V0X3NlcnZlcl9pcD9hZGRyZXNzPVwiICsgYWRkcmVzcyk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBzZXRfbWFwID0gKGZpbGVuYW1lKSA9PiB7XHJcbiAgICByZXR1cm4gYXhpb3MuZ2V0KGJhc2VVUkwgKyBcInNldF9tYXA/ZmlsZV9uYW1lPVwiICsgZmlsZW5hbWUpO1xyXG59O1xyXG5leHBvcnQgY29uc3Qgc2V0X3dlYXBvbiA9ICh2KSA9PiB7XHJcbiAgICByZXR1cm4gYXhpb3MuZ2V0KGJhc2VVUkwgKyBcInNldF93ZWFwb24/V2VhcG9uVHlwZT1cIiArIHYpO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBSZXBsaWNhdGlvbkFjdGlvblR5cGUgYXMgUkFULCBSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0ICogYXMgV1MgZnJvbSBcIi4vd2Vic29ja2V0UHJpbWl0aXZlc1wiO1xyXG5pbXBvcnQgeyBzZXRfc2VydmVyX2lwIH0gZnJvbSBcIi4uL2FwaS9zdGFuZGFyZFwiO1xyXG4vL2NvbnNvbGUubG9nKFwid2Vid29ya2VyIHJ1bm5pbmdcIilcclxubGV0IHdzID0gbnVsbDtcclxubGV0IHNlc3Npb25JZCA9IG51bGw7XHJcbmxldCBwaW5nVGltZXIgPSBudWxsO1xyXG5sZXQgd3NDbG9zZWQgPSBmYWxzZTtcclxuLy8gV29ya2VyICdJTydcclxub25tZXNzYWdlID0gKGUpID0+IHtcclxuICAgIGxldCBtZXNzYWdlID0gZS5kYXRhO1xyXG4gICAgc3dpdGNoIChtZXNzYWdlLmZ1bmMpIHtcclxuICAgICAgICBjYXNlIFwiQ1JFQVRFXCI6XHJcbiAgICAgICAgICAgIHdzID0gY3JlYXRlKG1lc3NhZ2UucGF5bG9hZC5zZXJ2ZXJBZGRyZXNzLCBtZXNzYWdlLnBheWxvYWQuc2VyaWFsaXphYmxlU3RhdGUpO1xyXG4gICAgICAgICAgICBzZXRfc2VydmVyX2lwKG1lc3NhZ2UucGF5bG9hZC5zZXJ2ZXJBZGRyZXNzKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY2FzZSBcIkpPSU5cIjpcclxuICAgICAgICAgICAgd3MgPSBqb2luKG1lc3NhZ2UucGF5bG9hZC5zZXJ2ZXJBZGRyZXNzLCBtZXNzYWdlLnBheWxvYWQuc2Vzc2lvbklkKTtcclxuICAgICAgICAgICAgc2V0X3NlcnZlcl9pcChtZXNzYWdlLnBheWxvYWQuc2VydmVyQWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNhc2UgXCJDSEFOR0VfTkFNRVwiOlxyXG4gICAgICAgICAgICBpZiAod3MgJiYgc2Vzc2lvbklkKVxyXG4gICAgICAgICAgICAgICAgV1MuY2hhbmdlTmFtZSh3cywgbWVzc2FnZS5wYXlsb2FkLm5ld05hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICBjYXNlIFwiVEVSTUlOQVRFXCI6XHJcbiAgICAgICAgICAgIGlmICh3cylcclxuICAgICAgICAgICAgICAgIHRlcm1pbmF0ZSh3cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNhc2UgXCJTRU5EXCI6XHJcbiAgICAgICAgICAgIGlmICh3cyAmJiBzZXNzaW9uSWQpXHJcbiAgICAgICAgICAgICAgICBXUy5zZW5kKHdzLCBtZXNzYWdlLnBheWxvYWQubWVzc2FnZSk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IHNlbmRUb01haW4gPSAobWVzc2FnZSkgPT4ge1xyXG4gICAgcG9zdE1lc3NhZ2UobWVzc2FnZSk7XHJcbn07XHJcbmNvbnN0IGRpc3BhdGNoID0gKGFjdGlvbikgPT4ge1xyXG4gICAgc2VuZFRvTWFpbih7IGV2ZW50OiBcIkRJU1BBVENIXCIsIHBheWxvYWQ6IHsgYWN0aW9uIH0gfSk7XHJcbn07XHJcbi8vIENvbm5lY3Rpb24gc2V0dXBcclxuY29uc3QgY29uc3RydWN0b3IgPSAoc2VydmVyQWRkcmVzcykgPT4ge1xyXG4gICAgbGV0IHdzID0gbmV3IFdlYlNvY2tldChzZXJ2ZXJBZGRyZXNzKTtcclxuICAgIHdzLm9ubWVzc2FnZSA9IChldikgPT4gb25NZXNzYWdlKGV2KTtcclxuICAgIHdzLm9uY2xvc2UgPSAoZXYpID0+IG9uQ2xvc2UoZXYpO1xyXG4gICAgd3Mub25lcnJvciA9IChldikgPT4gb25FcnJvcihldik7XHJcbiAgICByZXR1cm4gd3M7XHJcbn07XHJcbmNvbnN0IGNyZWF0ZSA9IChzZXJ2ZXJBZGRyZXNzLCBzZXJpYWxpemFibGVTdGF0ZSkgPT4ge1xyXG4gICAgbGV0IHdzID0gY29uc3RydWN0b3Ioc2VydmVyQWRkcmVzcyk7XHJcbiAgICBzdGFydFBpbmdUaW1lcih3cyk7XHJcbiAgICB3cy5vbm9wZW4gPSAoZXYpID0+IHtcclxuICAgICAgICBXUy5jcmVhdGVTZXNzaW9uKHdzLCBzZXJpYWxpemFibGVTdGF0ZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHdzO1xyXG59O1xyXG5jb25zdCBqb2luID0gKHNlcnZlckFkZHJlc3MsIHNlc3Npb25JZCkgPT4ge1xyXG4gICAgbGV0IHdzID0gY29uc3RydWN0b3Ioc2VydmVyQWRkcmVzcyk7XHJcbiAgICBzdGFydFBpbmdUaW1lcih3cyk7XHJcbiAgICB3cy5vbm9wZW4gPSAoZXYpID0+IHtcclxuICAgICAgICBXUy5qb2luU2Vzc2lvbih3cywgc2Vzc2lvbklkKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gd3M7XHJcbn07XHJcbmNvbnN0IHN0YXJ0UGluZ1RpbWVyID0gKHdzKSA9PiB7XHJcbiAgICBwaW5nVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgV1Muc2VuZFBpbmcod3MpO1xyXG4gICAgfSwgMTAwMCk7XHJcbn07XHJcbi8vIHRlYXJkb3duXHJcbmNvbnN0IHRlcm1pbmF0ZSA9ICh3cykgPT4ge1xyXG4gICAgd3NDbG9zZWQgPSB0cnVlO1xyXG4gICAgc2Vzc2lvbklkID0gbnVsbDtcclxuICAgIGlmIChwaW5nVGltZXIgIT09IG51bGwpXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChwaW5nVGltZXIpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBXUy5sZWF2ZVNlc3Npb24od3MpO1xyXG4gICAgICAgIHdzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgLy8gbm90aGluZyB0byBkbyBoZXJlLlxyXG4gICAgfVxyXG59O1xyXG4vLyBXZWJzb2NrZXQgYmVoYXZpb3JcclxuY29uc3Qgb25NZXNzYWdlID0gKGV2KSA9PiB7XHJcbiAgICBsZXQgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXYuZGF0YSk7XHJcbiAgICBpZiAobWVzc2FnZS5jb21tYW5kID09IFJlcGxpY2F0aW9uTWVzc2FnZVR5cGUuZXJyb3IpIHtcclxuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFJBVC5yZWNlaXZlTWVzc2FnZSwgcGF5bG9hZDogeyBtZXNzYWdlLCBzZXNzaW9uSWQ6IFwiXCIgfSB9KTtcclxuICAgIH1cclxuICAgIGlmIChtZXNzYWdlLmNvbW1hbmQgPT0gUmVwbGljYXRpb25NZXNzYWdlVHlwZS5qb2luZWQpIHtcclxuICAgICAgICBzZXNzaW9uSWQgPSBtZXNzYWdlLnBheWxvYWQuc2Vzc2lvbklkO1xyXG4gICAgICAgIHNlbmRUb01haW4oeyBldmVudDogXCJTRVNTSU9OX0lEXCIsIHBheWxvYWQ6IG1lc3NhZ2UucGF5bG9hZCB9KTtcclxuICAgIH1cclxuICAgIGlmIChzZXNzaW9uSWQgIT09IG51bGwpIHtcclxuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFJBVC5yZWNlaXZlTWVzc2FnZSwgcGF5bG9hZDogeyBtZXNzYWdlLCBzZXNzaW9uSWQ6IHNlc3Npb25JZCB9IH0pO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBvbkNsb3NlID0gKGV2KSA9PiB7XHJcbiAgICBpZiAod3MpXHJcbiAgICAgICAgdGVybWluYXRlKHdzKTtcclxuICAgIHNlbmRUb01haW4oeyBldmVudDogXCJDTE9TRVwiIH0pO1xyXG59O1xyXG5jb25zdCBvbkVycm9yID0gKGV2KSA9PiB7XHJcbiAgICBpZiAod3MpXHJcbiAgICAgICAgdGVybWluYXRlKHdzKTtcclxuICAgIHNlbmRUb01haW4oeyBldmVudDogXCJFUlJPUlwiLCBwYXlsb2FkOiB7IG1zZzogXCJcIiB9IH0pO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBDbGllbnRSZXF1ZXN0VHlwZSB9IGZyb20gXCIuLi9yZXBsaWNhdGlvbl93cy90eXBlc1wiO1xyXG4vKiBmb3IgcmVmZXJlbmNlIG9ubHlcclxuY29uc3QgbmV3Q29ubmVjdGlvbiA9IChcclxuICB1cmk6IHN0cmluZyxcclxuICBvbk9wZW46IChldjogRXZlbnQpID0+IGFueSxcclxuICBvbk1lc3NhZ2U6IChldjogTWVzc2FnZUV2ZW50KSA9PiBhbnksXHJcbiAgb25DbG9zZTogKGV2OiBDbG9zZUV2ZW50KSA9PiBhbnksXHJcbiAgb25FcnJvcjogKGV2OiBFdmVudCkgPT4gYW55XHJcbik6IFdlYlNvY2tldCA9PiB7XHJcbiAgbGV0IHdzID0gbmV3IFdlYlNvY2tldCh1cmkpO1xyXG4gIHdzLm9ub3BlbiA9IG9uT3BlbjtcclxuICB3cy5vbm1lc3NhZ2UgPSAoZXY6IE1lc3NhZ2VFdmVudCk6IGFueSA9PiB7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwibWVzc2FnZTogXCIsIGV2LmRhdGEpO1xyXG4gICAgb25NZXNzYWdlKGV2KTtcclxuICB9O1xyXG4gIHdzLm9uY2xvc2UgPSAoZXY6IENsb3NlRXZlbnQpOiBhbnkgPT4ge1xyXG4gICAgb25DbG9zZShldik7XHJcbiAgfTtcclxuICB3cy5vbmVycm9yID0gb25FcnJvcjtcclxuICByZXR1cm4gd3M7XHJcbn1cclxuKi9cclxuZXhwb3J0IGNvbnN0IHNlbmQgPSAod3MsIG1lc3NhZ2UpID0+IHtcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xyXG59O1xyXG5leHBvcnQgY29uc3Qgc2VuZFBpbmcgPSAod3MpID0+IHtcclxuICAgIC8vY29uc29sZS5sb2coXCJzZW5kaW5nIHBpbmdcIilcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBjb21tYW5kOiBDbGllbnRSZXF1ZXN0VHlwZS5waW5nIH0pKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNlc3Npb24gPSAod3MsIHNlcml6YWJsZVN0YXRlKSA9PiB7XHJcbiAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHsgY29tbWFuZDogQ2xpZW50UmVxdWVzdFR5cGUuY3JlYXRlLCBwYXlsb2FkOiB7IHN0YXRlOiBzZXJpemFibGVTdGF0ZSB9IH0pKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGpvaW5TZXNzaW9uID0gKHdzLCBzZXNzaW9uSWQpID0+IHtcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBjb21tYW5kOiBDbGllbnRSZXF1ZXN0VHlwZS5qb2luLCBwYXlsb2FkOiB7IHNlc3Npb25JZCB9IH0pKTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGNoYW5nZU5hbWUgPSAod3MsIG5hbWUpID0+IHtcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBjb21tYW5kOiBDbGllbnRSZXF1ZXN0VHlwZS5jaGFuZ2VOYW1lLCBwYXlsb2FkOiB7IG5hbWUgfSB9KSk7XHJcbn07XHJcbmV4cG9ydCBjb25zdCBsZWF2ZVNlc3Npb24gPSAod3MpID0+IHtcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBjb21tYW5kOiBDbGllbnRSZXF1ZXN0VHlwZS5sZWF2ZSB9KSk7XHJcbiAgICB3cy5jbG9zZSgpO1xyXG59O1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbi8vIHRoZSBzdGFydHVwIGZ1bmN0aW9uXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnggPSAoKSA9PiB7XG5cdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuXHQvLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcblx0dmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNDQ2XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNTA0NikpKVxuXHRfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuXHRyZXR1cm4gX193ZWJwYWNrX2V4cG9ydHNfXztcbn07XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5mID0ge307XG4vLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18uZSA9IChjaHVua0lkKSA9PiB7XG5cdHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmYpLnJlZHVjZSgocHJvbWlzZXMsIGtleSkgPT4ge1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18uZltrZXldKGNodW5rSWQsIHByb21pc2VzKTtcblx0XHRyZXR1cm4gcHJvbWlzZXM7XG5cdH0sIFtdKSk7XG59OyIsIi8vIFRoaXMgZnVuY3Rpb24gYWxsb3cgdG8gcmVmZXJlbmNlIGFzeW5jIGNodW5rcyBhbmQgc2libGluZyBjaHVua3MgZm9yIHRoZSBlbnRyeXBvaW50XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgKCFzY3JpcHRVcmwgfHwgIS9eaHR0cChzPyk6Ly50ZXN0KHNjcmlwdFVybCkpKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGNodW5rc1xuLy8gXCIxXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ0NjogMVxufTtcblxuLy8gaW1wb3J0U2NyaXB0cyBjaHVuayBsb2FkaW5nXG52YXIgaW5zdGFsbENodW5rID0gKGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Zm9yKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR3aGlsZShjaHVua0lkcy5sZW5ndGgpXG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzLnBvcCgpXSA9IDE7XG5cdHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xufTtcbl9fd2VicGFja19yZXF1aXJlX18uZi5pID0gKGNodW5rSWQsIHByb21pc2VzKSA9PiB7XG5cdC8vIFwiMVwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuXHRpZighaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0aWYodHJ1ZSkgeyAvLyBhbGwgY2h1bmtzIGhhdmUgSlNcblx0XHRcdGltcG9ydFNjcmlwdHMoX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpKTtcblx0XHR9XG5cdH1cbn07XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rc3F1YWRzdHJhdFwiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtzcXVhZHN0cmF0XCJdIHx8IFtdO1xudmFyIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uID0gY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSBpbnN0YWxsQ2h1bms7XG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3QiLCIvLyBydW4gc3RhcnR1cFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLngoKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImxlYWZQcm90b3R5cGVzIiwiZ2V0UHJvdG8iLCJuZXh0IiwiUmVwbGljYXRpb25BY3Rpb25UeXBlIiwiU2Vzc2lvbkFjdGlvblR5cGUiLCJSZXBsaWNhdGlvbk1lc3NhZ2VUeXBlIiwiQ2xpZW50UmVxdWVzdFR5cGUiLCJpbnRlcmNlcHRvcnMiLCJyZXNwb25zZSIsInVzZSIsInJlcyIsImRhdGEiLCJzdWNjZXNzIiwibm90aWZpY2F0aW9uIiwiZXJyb3IiLCJtZXNzYWdlIiwiZGVzY3JpcHRpb24iLCJQcm9taXNlIiwicmVqZWN0IiwiYmFzZVVSTCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJzZWxmIiwic2V0X3NlcnZlcl9pcCIsImFkZHJlc3MiLCJnZXQiLCJ3cyIsInNlc3Npb25JZCIsInBpbmdUaW1lciIsIndzQ2xvc2VkIiwib25tZXNzYWdlIiwiZSIsImZ1bmMiLCJjcmVhdGUiLCJwYXlsb2FkIiwic2VydmVyQWRkcmVzcyIsInNlcmlhbGl6YWJsZVN0YXRlIiwiam9pbiIsIm5hbWUiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbW1hbmQiLCJjaGFuZ2VOYW1lIiwibmV3TmFtZSIsInRlcm1pbmF0ZSIsInNlbmRUb01haW4iLCJwb3N0TWVzc2FnZSIsImRpc3BhdGNoIiwiYWN0aW9uIiwiZXZlbnQiLCJXZWJTb2NrZXQiLCJldiIsIm9uTWVzc2FnZSIsIm9uY2xvc2UiLCJvbkNsb3NlIiwib25lcnJvciIsIm9uRXJyb3IiLCJzdGFydFBpbmdUaW1lciIsIm9ub3BlbiIsInNlcml6YWJsZVN0YXRlIiwic3RhdGUiLCJzZXRJbnRlcnZhbCIsInBpbmciLCJjbGVhckludGVydmFsIiwibGVhdmUiLCJjbG9zZSIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZSIsInR5cGUiLCJyZWNlaXZlTWVzc2FnZSIsImpvaW5lZCIsIm1zZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIngiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiTyIsInJlc3VsdCIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImxlbmd0aCIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJyIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImdldFByb3RvdHlwZU9mIiwib2JqIiwidCIsInZhbHVlIiwibW9kZSIsInRoaXMiLCJ0aGVuIiwibnMiLCJkZWYiLCJjdXJyZW50IiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5TmFtZXMiLCJmb3JFYWNoIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJmIiwiY2h1bmtJZCIsImFsbCIsInJlZHVjZSIsInByb21pc2VzIiwidSIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGVzdCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsInB1c2giLCJiaW5kIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwicG9wIl0sInNvdXJjZVJvb3QiOiIifQ==